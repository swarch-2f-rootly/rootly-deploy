# Rootly Platform - Environment Variables Configuration
# This file contains all environment variables used by the platform services

# ============================================================================
# KAFKA CONFIGURATION 
# ============================================================================
KAFKA_PORT=9092
KAFKA_BROKER_ID=1
KAFKA_ZOOKEEPER_CONNECT=zookeeper-data-ingestion:2181
KAFKA_LISTENER_SECURITY_PROTOCOL_MAP=PLAINTEXT:PLAINTEXT
KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://queue-data-ingestion:9092
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1
KAFKA_TRANSACTION_STATE_LOG_MIN_ISR=1
KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR=1

KAFKA_BROKERS=queue-data-ingestion:9092
KAFKA_TOPIC=raw.measurements
KAFKA_GROUP_ID=data-management-consumer

QUEUE_UI_PORT=8082
QUEUE_UI_CLUSTER_NAME=local
QUEUE_UI_BOOTSTRAP_SERVERS=queue-data-ingestion:9092

ZOOKEEPER_PORT=2181
ZOOKEEPER_CLIENT_PORT=2181
ZOOKEEPER_TICK_TIME=2000


# ============================================================================
# INFLUXDB CONFIGURATION (Shared by analytics and data-management backends)
# ============================================================================
INFLUXDB_PORT=8086
INFLUXDB_ADMIN_USER=admin
INFLUXDB_ADMIN_PASSWORD=admin123
INFLUXDB_ORG=rootly
INFLUXDB_BUCKET=agricultural_data
INFLUXDB_TOKEN=super-secret-influx-token
INFLUXDB_URL=http://db-data-processing:8086
DOCKER_INFLUXDB_INIT_MODE=setup
DOCKER_INFLUXDB_INIT_USERNAME=admin
DOCKER_INFLUXDB_INIT_PASSWORD=admin123
DOCKER_INFLUXDB_INIT_ORG=rootly
DOCKER_INFLUXDB_INIT_BUCKET=agricultural_data
DOCKER_INFLUXDB_INIT_ADMIN_TOKEN=super-secret-influx-token

# ============================================================================
# MINIO CONFIGURATION (Main MinIO for data storage)
# ============================================================================
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_ROOT_USER=admin
MINIO_ROOT_PASSWORD=admin123
MINIO_ENDPOINT=stg-data-processing:9000
MINIO_BUCKET=raw-data
MINIO_USE_SSL=false

# ============================================================================
# MINIO AUTH CONFIGURATION (MinIO for user profile photos)
# ============================================================================
MINIO_AUTH_PORT=9002
MINIO_AUTH_CONSOLE_PORT=9003
MINIO_AUTH_ROOT_USER=admin
MINIO_AUTH_ROOT_PASSWORD=admin123

# ============================================================================
# MINIO USER PLANT CONFIGURATION (MinIO for user plant management)
# ============================================================================
MINIO_USER_PLANT_PORT=9004
MINIO_USER_PLANT_CONSOLE_PORT=9005
MINIO_USER_PLANT_ROOT_USER=admin
MINIO_USER_PLANT_ROOT_PASSWORD=admin123

# ============================================================================
# POSTGRESQL CONFIGURATION (Authentication backend database)
# ============================================================================
POSTGRES_PORT=5432
POSTGRES_DB=authentication_and_roles_db
POSTGRES_USER=admin
POSTGRES_PASSWORD=admin123
DATABASE_URL=postgresql+asyncpg://admin:admin123@db-authentication-and-roles:5432/authentication_and_roles_db
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=1800

# ============================================================================
# POSTGRESQL USER PLANT CONFIGURATION (User plant management backend database)
# ============================================================================
POSTGRES_USER_PLANT_PORT=5433
POSTGRES_USER_PLANT_DB=user_plant_management
POSTGRES_USER_PLANT_USER=admin
POSTGRES_USER_PLANT_PASSWORD=admin123

# ============================================================================
# JWT CONFIGURATION (Authentication tokens)
# ============================================================================
JWT_SECRET_KEY=test-jwt-secret-key-for-development-only-32-chars-minimum
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=240
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_USER_PLANT_SECRET=changeme

# ============================================================================
# MINIO AUTH SETTINGS (For authentication backend profile storage)
# ============================================================================
MINIO_ACCESS_KEY=admin
MINIO_SECRET_KEY=admin123
MINIO_BUCKET_NAME=user-profiles
MINIO_SECURE=false

# ============================================================================
# SECURITY SETTINGS (Authentication backend)
# ============================================================================
BCRYPT_ROUNDS=12
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=30
MAX_CONCURRENT_SESSIONS=5

# ============================================================================
# FILE UPLOAD SETTINGS (Authentication backend)
# ============================================================================
MAX_PROFILE_PHOTO_SIZE_MB=5
ALLOWED_IMAGE_TYPES=jpeg,jpg,png,webp

# ============================================================================
# APPLICATION SETTINGS (Common across all services)
# ============================================================================
APP_NAME=Rootly Platform Services
APP_NAME_AUTH=Rootly Authentication Service
APP_NAME_ANALYTICS=Rootly Analytics Service
APP_NAME_DATA_MANAGEMENT=Rootly Data Management Service
APP_NAME_USER_PLANT=Rootly User Plant Management Service
APP_VERSION=1.0.0
DEBUG=false
ENVIRONMENT=production

# ============================================================================
# SERVER SETTINGS (Individual service ports)
# ============================================================================
HOST=0.0.0.0
SERVERS_INTERNAL_PORT=8000
ANALYTICS_EXTERNAL_PORT=8000
AUTH_EXTERNAL_PORT=8001
DATA_MANAGEMENT_EXTERNAL_PORT=8002
USER_PLANT_MANAGEMENT_EXTERNAL_PORT=8003

# ============================================================================
# CORS CONFIGURATION (Common across all services)
# ============================================================================
CORS_ORIGINS=http://localhost:3000,http://localhost:3005,http://localhost:3005,http://localhost:8080,http://localhost:8000,http://localhost:8001,http://localhost:8002,http://localhost:8080,*

# ============================================================================
# LOGGING CONFIGURATION (Common across all services)
# ============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# ============================================================================
# EXTERNAL ACCESS CONFIGURATION
# ============================================================================
# HOST_IP will be auto-detected by the start script if not set
# You can manually set it to your LAN IP if needed
# HOST_IP=192.168.1.100

# ============================================================================
# API BASE URL (For client-facing URLs)
# ============================================================================
API_BASE_URL=http://localhost:8001


# ============================================================================
# Data Ingestion Configuration
# ============================================================================
DATA_INGESTION_ENV=development
DATA_INGESTION_APP_NAME=data-ingestion-service
DATA_INGESTION_APP_DEBUG=true
DATA_INGESTION_APP_VERSION=1.0.0

# Servidor HTTP
DATA_INGESTION_HTTP_SERVER_ADDR=:8000
DATA_INGESTION_HTTP_SERVER_PPROF=false
DATA_INGESTION_HTTP_SERVER_DEFAULT_PAGE_SIZE=20
DATA_INGESTION_HTTP_SERVER_MAX_PAGE_SIZE=100
DATA_INGESTION_HTTP_SERVER_READ_TIMEOUT=30s
DATA_INGESTION_HTTP_SERVER_WRITE_TIMEOUT=30s

# Servidor de métricas
DATA_INGESTION_METRICS_SERVER_ADDR=:9090
DATA_INGESTION_METRICS_SERVER_ENABLED=true
DATA_INGESTION_METRICS_SERVER_PATH=/metrics

# Configuración de Kafka
DATA_INGESTION_KAFKA_BROKERS=queue-data-ingestion:9092
DATA_INGESTION_KAFKA_TOPICS=raw.measurements
DATA_INGESTION_KAFKA_GROUP_ID=development-ingestion-group
DATA_INGESTION_KAFKA_CLIENT_ID=ingestion-service-dev
DATA_INGESTION_KAFKA_SESSION_TIMEOUT=30s
DATA_INGESTION_KAFKA_HEARTBEAT_INTERVAL=10s
DATA_INGESTION_KAFKA_AUTO_OFFSET_RESET=earliest
DATA_INGESTION_KAFKA_ENABLE_AUTO_COMMIT=true

# Configuración de logs
DATA_INGESTION_LOG_LEVEL=debug
DATA_INGESTION_LOG_ENABLE_CONSOLE=true
DATA_INGESTION_LOG_ENABLE_COLOR=true
DATA_INGESTION_LOG_ENABLE_CALLER=true
DATA_INGESTION_LOG_ENABLE_STACKTRACE=true

# Directorio de migraciones (si aplica)
DATA_INGESTION_MIGRATION_DIR=./migrations